function toggleMenu(){document.getElementById("mobileMenu").classList.toggle("active")}function copyPaymentNumber(e){if(!e)return;const t=e.closest(".payment-info-card")||e.closest(".payment-content"),o=t?t.querySelector(".payment-number")||t.querySelector("#paymentNumber"):document.getElementById("paymentNumber");if(!o)return;const n=o.innerText;navigator.clipboard.writeText(n).then(()=>{e.classList.add("copied"),e.innerHTML='<span id="copyIcon">Â¡Copiado!</span>',setTimeout(()=>{e.classList.remove("copied"),e.innerHTML='<span id="copyIcon">Copiar</span>'},2e3)}).catch(t=>{console.error("Error al copiar:",t),e.innerHTML='<span id="copyIcon">Error</span>',setTimeout(()=>{e.innerHTML='<span id="copyIcon">Copiar</span>'},2e3)})}function toggleFaq(e){const t=e.parentElement,o=t.classList.contains("active");document.querySelectorAll(".faq-item").forEach(e=>{e.classList.remove("active")}),o||t.classList.add("active")}function initQuantitySelectors(){document.querySelectorAll(".platform-card[data-platform]").forEach(e=>{const t=e.querySelector(".month-minus"),o=e.querySelector(".month-plus"),n=e.querySelector(".month-value"),r=e.querySelector(".qty-minus"),s=e.querySelector(".qty-plus"),c=e.querySelector(".qty-value:not(.month-value)"),i=e.querySelector(".price-amount"),l=e.querySelector(".price-per-unit"),a=e.querySelector(".selection-badge"),d=e.querySelector(".btn-buy");if(!(r&&s&&c&&d))return;const u=e.getAttribute("data-platform"),m=parseInt(e.getAttribute("data-price-1m"));if(["YouTube Premium","Canva Pro","Gemini AI Pro"].includes(u)){e.querySelectorAll(".qty-label").forEach(e=>{"Perfiles"===e.textContent&&(e.textContent="Cuentas")})}let f=1,h=1;function y(e){return 2===e?2e3:e>=3?6e3:0}function p(){c.textContent=f,n&&(n.textContent=h);const e=y(f),p=y(h);let v;if("YouTube Premium"===u){let e=7e3;2===h&&(e=12e3),3===h&&(e=16e3),v=e*f}else{v=m*f*h-(e*h+p*f)}Math.round(v/f/h);if(i&&(i.textContent=`$${v.toLocaleString("es-CO")}`),l){const e=["YouTube Premium","Canva Pro","Gemini AI Pro"].includes(u)?"cuenta":"perfil";let t,o;h>1&&f>1?(t=Math.round(v/f/h),o=`mes x ${e}`):h>1?(t=Math.round(v/h),o="mes"):f>1?(t=Math.round(v/f),o=e):(t=v,o=e),l.textContent=`$${t.toLocaleString("es-CO")}/${o}`}if(a){const e=1===h?"1 Mes":`${h} Meses`,t=["YouTube Premium","Canva Pro","Gemini AI Pro"].includes(u)?1===f?"Cuenta":"Cuentas":1===f?"Perfil":"Perfiles";a.textContent=`${e} â€¢ ${f} ${t}`}const g=`$${v.toLocaleString("es-CO")}`,b=h>1?`${h} Meses`:"1 Mes",L=["YouTube Premium","Canva Pro","Gemini AI Pro"].includes(u)?"cuentas":"perfiles",S=`Quiero comprar ${u} ${b}${f>1?` (${f} ${L})`:""} - Precio: ${g}`;d.href=`https://wa.me/573058588651?text=${encodeURIComponent(S)}`,r.disabled=f<=1,s.disabled=f>=3,t&&(t.disabled=h<=1),o&&(o.disabled=h>=3)}r.addEventListener("click",e=>{e.preventDefault(),f>1&&(f--,p())}),s.addEventListener("click",e=>{e.preventDefault(),f<3&&(f++,p())}),t&&o&&(t.addEventListener("click",e=>{e.preventDefault(),h>1&&(h--,p())}),o.addEventListener("click",e=>{e.preventDefault(),h<3&&(h++,p())})),p()})}let scrollTimeout,lastScrollTop=0;window.addEventListener("scroll",function(){const e=document.querySelector("header"),t=document.querySelector(".payment-banner"),o=document.querySelector(".scroll-buttons");let n=window.pageYOffset||document.documentElement.scrollTop;n>50?e.classList.add("scrolled"):e.classList.remove("scrolled"),n>lastScrollTop&&n>100?(t.classList.add("hidden"),o&&o.classList.add("hidden")):(t.classList.remove("hidden"),o&&o.classList.remove("hidden")),lastScrollTop=n<=0?0:n,clearTimeout(scrollTimeout),scrollTimeout=setTimeout(function(){o&&o.classList.remove("hidden")},1e3)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){const t=this.getAttribute("href");if(t&&t.startsWith("#")){e.preventDefault();const o=document.querySelector(t);if(o){o.scrollIntoView({behavior:"smooth",block:"start"});const e=document.getElementById("mobileMenu");e.classList.contains("active")&&e.classList.remove("active")}}})});const observerOptions={threshold:.1,rootMargin:"0px 0px -50px 0px"},observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity="1",e.target.style.transform="translateY(0)")})},observerOptions);function openLightbox(e){const t=document.getElementById("lightbox"),o=document.getElementById("lightbox-img");t&&o&&(o.src=e.src,t.classList.add("active"),document.body.style.overflow="hidden")}function closeLightbox(){const e=document.getElementById("lightbox");e&&(e.classList.remove("active"),document.body.style.overflow="auto")}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".platform-card, .combo-card, .referencia-card").forEach(e=>{e.style.opacity="0",e.style.transform="translateY(20px)",e.style.transition="opacity 0.5s ease, transform 0.5s ease",observer.observe(e)});const e=document.querySelector(".carousel-track");if(e){const a=Array.from(e.children),d=document.querySelector(".carousel-button--right"),u=document.querySelector(".carousel-button--left"),m=document.querySelector(".carousel-nav"),f=Array.from(m.children);if(0===a.length)return;const h=()=>a[0].getBoundingClientRect().width,y=(e,t)=>{e.style.left=h()*t+"px"};a.forEach(y);const p=(e,t,o)=>{e.style.transform="translateX(-"+o.style.left+")",t.classList.remove("current-slide"),o.classList.add("current-slide")},v=(e,t)=>{e.classList.remove("current-slide"),t.classList.add("current-slide")},g=()=>window.innerWidth>768?3:1,b=(e,t,o,n)=>{const r=g();0===n?(t.classList.add("is-hidden"),o.classList.remove("is-hidden")):n>=e.length-r?(t.classList.remove("is-hidden"),o.classList.add("is-hidden")):(t.classList.remove("is-hidden"),o.classList.remove("is-hidden"))};b(a,u,d,0),u.addEventListener("click",t=>{const o=e.querySelector(".current-slide"),n=o.previousElementSibling,r=m.querySelector(".current-slide"),s=r.previousElementSibling,c=a.findIndex(e=>e===n);n&&(p(e,o,n),v(r,s),b(a,u,d,c))}),d.addEventListener("click",t=>{const o=e.querySelector(".current-slide"),n=o.nextElementSibling,r=m.querySelector(".current-slide"),s=r.nextElementSibling,c=a.findIndex(e=>e===n);(n&&c<=a.length-g()||n&&1===g())&&(p(e,o,n),v(r,s),b(a,u,d,c))}),m.addEventListener("click",t=>{const o=t.target.closest("button");if(!o)return;const n=e.querySelector(".current-slide"),r=m.querySelector(".current-slide"),s=f.findIndex(e=>e===o),c=a[s];a.length,g(),p(e,n,c),v(r,o),b(a,u,d,s)}),window.addEventListener("resize",()=>{a.forEach(y);const t=e.querySelector(".current-slide");t&&(e.style.transform="translateX(-"+t.style.left+")");const o=a.findIndex(e=>e===t);b(a,u,d,o)})}const t=document.querySelectorAll('.platform-option input[type="checkbox"]'),o=document.getElementById("ultimate-price"),n=document.getElementById("btn-ultimate");if(t.length&&o&&n){function r(){let e=0,r=[];t.forEach(t=>{t.checked&&(e+=parseInt(t.dataset.price),r.push(t.dataset.name))});const s=r.length;let c=0;2===s?c=2e3:3===s?c=5e3:4===s?c=7e3:s>=5&&(c=1e4);let i=e>0?e-c:0;i<0&&(i=0),o.textContent="$"+i.toLocaleString("es-CO");const l=document.querySelector(".combo-ultimate .combo-savings");l&&(l.textContent=c>0?`ðŸ’° Ahorro de $${c.toLocaleString("es-CO")} aplicado`:"Selecciona 2 o mÃ¡s para descuento");const a=`Quiero mi Combo Personalizado: ${r.join(", ")}. Precio: $${i.toLocaleString("es-CO")}`,d=encodeURIComponent(a);n.href=`https://wa.me/573058588651?text=${d}`,console.log("Combo updated:",i,n.href);const u={starter:["Netflix","Prime Video"],premium:["Netflix","Disney+ Premium","HBO Max","Prime Video"]};document.querySelectorAll(".btn-suggestion").forEach(e=>{const t=e.dataset.combo,o=u[t];if(o){o.length===r.length&&o.every(e=>r.includes(e))?e.classList.add("active"):e.classList.remove("active")}})}console.log("Custom Combo elements found");const L=document.querySelectorAll(".btn-suggestion"),S={starter:["Netflix","Prime Video"],premium:["Netflix","Disney+ Premium","HBO Max","Prime Video"]};L.forEach(e=>{e.addEventListener("click",()=>{const o=e.dataset.combo,n=S[o];n&&(t.forEach(e=>e.checked=!1),t.forEach(e=>{n.includes(e.dataset.name)&&(e.checked=!0)}),r(),e.style.transform="scale(0.95)",setTimeout(()=>e.style.transform="",150))})}),t.forEach(e=>{e.addEventListener("change",r)}),r()}else console.error("Custom Combo elements missing:",{checkboxes:t.length,priceDisplay:!!o,btnUltimate:!!n});if("#faq-reseller"===window.location.hash){const q=document.getElementById("faq-reseller");if(q){const E=q.querySelector(".faq-question");E&&setTimeout(()=>{toggleFaq(E),q.scrollIntoView({behavior:"smooth",block:"center"})},500)}}const s=document.getElementById("scroll-up"),c=document.getElementById("scroll-down"),i=()=>Array.from(document.querySelectorAll("header, section, footer")).filter(e=>e.offsetHeight>0),l=e=>{const t=window.scrollY+window.innerHeight/3;for(let o=e.length-1;o>=0;o--)if(e[o].offsetTop<=t)return o;return 0};if(s&&c){let x;s.addEventListener("click",()=>{const e=i(),t=l(e);e[Math.max(0,t-1)].scrollIntoView({behavior:"smooth"})}),c.addEventListener("click",()=>{const e=i(),t=l(e);e[Math.min(e.length-1,t+1)].scrollIntoView({behavior:"smooth"})});const C=document.querySelector(".scroll-buttons"),I=document.querySelector(".whatsapp-float");window.addEventListener("scroll",()=>{C&&C.classList.add("hidden"),I&&I.classList.add("hidden"),window.clearTimeout(x),x=setTimeout(()=>{C&&C.classList.remove("hidden"),I&&I.classList.remove("hidden")},1e3)})}}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".carousel-slide img").forEach(e=>{e.addEventListener("click",()=>openLightbox(e))}),initQuantitySelectors()});