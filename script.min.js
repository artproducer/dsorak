function toggleMenu(){document.getElementById("mobileMenu").classList.toggle("active")}function copyPaymentNumber(e){if(!e)return;const t=e.closest(".payment-info-card")||e.closest(".payment-content"),o=t?t.querySelector(".payment-number")||t.querySelector("#paymentNumber"):document.getElementById("paymentNumber");if(!o)return;const n=o.innerText;navigator.clipboard.writeText(n).then(()=>{e.classList.add("copied"),e.innerHTML='<span id="copyIcon">Â¡Copiado!</span>',setTimeout(()=>{e.classList.remove("copied"),e.innerHTML='<span id="copyIcon">Copiar</span>'},2e3)}).catch(t=>{console.error("Error al copiar:",t),e.innerHTML='<span id="copyIcon">Error</span>',setTimeout(()=>{e.innerHTML='<span id="copyIcon">Copiar</span>'},2e3)})}function toggleFaq(e){const t=e.parentElement,o=t.classList.contains("active");document.querySelectorAll(".faq-item").forEach(e=>{e.classList.remove("active")}),o||t.classList.add("active")}function syncDisabledPlatforms(){const e=document.querySelectorAll(".platform-card.platform-disabled[data-platform]"),t=new Set;e.forEach(e=>{const o=e.getAttribute("data-platform");o&&t.add(o);const n=e.querySelector(".selectors-row-full");n&&(n.style.display="none")});const o=document.querySelector(".platform-checkboxes"),n=document.querySelectorAll(".platform-option"),r=[];n.forEach(e=>{const o=e.querySelector('input[type="checkbox"]');if(o){const n=o.dataset.name,s=e.querySelector(".platform-name-text");t.has(n)?(e.classList.add("platform-option-disabled"),o.disabled=!0,o.checked=!1,s&&!s.textContent.includes("No disponible")&&(s.textContent=`${n} (No disponible)`),r.push(e)):(e.classList.remove("platform-option-disabled"),o.disabled=!1)}}),o&&r.forEach(e=>{o.appendChild(e)})}function initQuantitySelectors(){syncDisabledPlatforms();document.querySelectorAll(".platform-card[data-platform]").forEach(e=>{if(e.classList.contains("platform-disabled"))return;const t=e.querySelector(".month-minus"),o=e.querySelector(".month-plus"),n=e.querySelector(".month-value"),r=e.querySelector(".qty-minus"),s=e.querySelector(".qty-plus"),c=e.querySelector(".qty-value:not(.month-value)"),l=e.querySelector(".price-amount"),i=e.querySelector(".price-per-unit"),a=e.querySelector(".selection-badge"),d=e.querySelector(".btn-buy");if(!(r&&s&&c&&d))return;const u=e.getAttribute("data-platform"),m=parseInt(e.getAttribute("data-price-1m"));if(["YouTube Premium","Canva Pro","Gemini AI Pro","CapCut Pro"].includes(u)){e.querySelectorAll(".qty-label").forEach(e=>{"Perfiles"===e.textContent&&(e.textContent="Cuentas")})}let f=1,p=1;function y(e){return 2===e?2e3:e>=3?6e3:0}function h(){c.textContent=f,n&&(n.textContent=p);const e=y(f),h=y(p);let b;if("YouTube Premium"===u){let e=7e3;2===p&&(e=12e3),3===p&&(e=16e3),b=e*f}else{b=m*f*p-(e*p+h*f)}Math.round(b/f/p);if(l&&(l.textContent=`$${b.toLocaleString("es-CO")}`),i){const e=["YouTube Premium","Canva Pro","Gemini AI Pro"].includes(u)?"cuenta":"perfil";let t,o;p>1&&f>1?(t=Math.round(b/f/p),o=`mes x ${e}`):p>1?(t=Math.round(b/p),o="mes"):f>1?(t=Math.round(b/f),o=e):(t=b,o=e),i.textContent=`$${t.toLocaleString("es-CO")}/${o}`}if(a){const e=1===p?"1 Mes":`${p} Meses`,t=["YouTube Premium","Canva Pro","Gemini AI Pro","CapCut Pro"].includes(u)?1===f?"Cuenta":"Cuentas":1===f?"Perfil":"Perfiles";a.textContent=`${e} â€¢ ${f} ${t}`}const v=`$${b.toLocaleString("es-CO")}`,g=p>1?`${p} Meses`:"1 Mes",L=["YouTube Premium","Canva Pro","Gemini AI Pro","CapCut Pro"].includes(u)?"cuentas":"perfiles",S=`Quiero comprar ${u} ${g}${f>1?` (${f} ${L})`:""} - Precio: ${v}`;d.href=`https://wa.me/573005965404?text=${encodeURIComponent(S)}`,r.disabled=f<=1,s.disabled=f>=3,t&&(t.disabled=p<=1),o&&(o.disabled=p>=3)}r.addEventListener("click",e=>{e.preventDefault(),f>1&&(f--,h())}),s.addEventListener("click",e=>{e.preventDefault(),f<3&&(f++,h())}),t&&o&&(t.addEventListener("click",e=>{e.preventDefault(),p>1&&(p--,h())}),o.addEventListener("click",e=>{e.preventDefault(),p<3&&(p++,h())})),h()})}let scrollTimeout,lastScrollTop=0;window.addEventListener("scroll",function(){const e=document.querySelector("header"),t=document.querySelector(".scroll-buttons");let o=window.pageYOffset||document.documentElement.scrollTop;o>50?e.classList.add("scrolled"):e.classList.remove("scrolled"),o>lastScrollTop&&o>100?t&&t.classList.add("hidden"):t&&t.classList.remove("hidden"),lastScrollTop=o<=0?0:o,clearTimeout(scrollTimeout),scrollTimeout=setTimeout(function(){t&&t.classList.remove("hidden")},1e3)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){const t=this.getAttribute("href");if(t&&t.startsWith("#")){e.preventDefault();const o=document.querySelector(t);if(o){o.scrollIntoView({behavior:"smooth",block:"start"});const e=document.getElementById("mobileMenu");e.classList.contains("active")&&e.classList.remove("active")}}})});const observerOptions={threshold:.1,rootMargin:"0px 0px -50px 0px"},observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity="1",e.target.style.transform="translateY(0)")})},observerOptions);function openLightbox(e){const t=document.getElementById("lightbox"),o=document.getElementById("lightbox-img");t&&o&&(o.src=e.src,t.classList.add("active"),document.body.style.overflow="hidden")}function closeLightbox(){const e=document.getElementById("lightbox");e&&(e.classList.remove("active"),document.body.style.overflow="auto")}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".platform-card, .referencia-card").forEach(e=>{e.style.opacity="0",e.style.transform="translateY(20px)",e.style.transition="opacity 0.5s ease, transform 0.5s ease",observer.observe(e)});const e=document.querySelector(".carousel-track");if(e){const a=Array.from(e.children),d=document.querySelector(".carousel-button--right"),u=document.querySelector(".carousel-button--left"),m=document.querySelector(".carousel-nav"),f=Array.from(m.children);if(0===a.length)return;const p=()=>a[0].getBoundingClientRect().width,y=(e,t)=>{e.style.left=p()*t+"px"};a.forEach(y);const h=(e,t,o)=>{e.style.transform="translateX(-"+o.style.left+")",t.classList.remove("current-slide"),o.classList.add("current-slide")},b=(e,t)=>{e.classList.remove("current-slide"),t.classList.add("current-slide")},v=()=>window.innerWidth>768?3:1,g=(e,t,o,n)=>{const r=v();0===n?(t.classList.add("is-hidden"),o.classList.remove("is-hidden")):n>=e.length-r?(t.classList.remove("is-hidden"),o.classList.add("is-hidden")):(t.classList.remove("is-hidden"),o.classList.remove("is-hidden"))};g(a,u,d,0),u.addEventListener("click",t=>{const o=e.querySelector(".current-slide"),n=o.previousElementSibling,r=m.querySelector(".current-slide"),s=r.previousElementSibling,c=a.findIndex(e=>e===n);n&&(h(e,o,n),b(r,s),g(a,u,d,c))}),d.addEventListener("click",t=>{const o=e.querySelector(".current-slide"),n=o.nextElementSibling,r=m.querySelector(".current-slide"),s=r.nextElementSibling,c=a.findIndex(e=>e===n);(n&&c<=a.length-v()||n&&1===v())&&(h(e,o,n),b(r,s),g(a,u,d,c))}),m.addEventListener("click",t=>{const o=t.target.closest("button");if(!o)return;const n=e.querySelector(".current-slide"),r=m.querySelector(".current-slide"),s=f.findIndex(e=>e===o),c=a[s];a.length,v(),h(e,n,c),b(r,o),g(a,u,d,s)}),window.addEventListener("resize",()=>{a.forEach(y);const t=e.querySelector(".current-slide");t&&(e.style.transform="translateX(-"+t.style.left+")");const o=a.findIndex(e=>e===t);g(a,u,d,o)})}const t=document.querySelectorAll('.platform-option input[type="checkbox"]'),o=document.getElementById("ultimate-price"),n=document.getElementById("btn-ultimate");if(t.length&&o&&n){function r(){let e=0,r=[];t.forEach(t=>{t.checked&&(e+=parseInt(t.dataset.price),r.push(t.dataset.name))});const s=r.length;let c=0;2===s?c=2e3:3===s?c=5e3:4===s?c=7e3:s>=5&&(c=1e4);let l=e>0?e-c:0;l<0&&(l=0),o.textContent="$"+l.toLocaleString("es-CO");const i=document.querySelector(".combo-ultimate .combo-savings");i&&(i.textContent=c>0?`ðŸ’° Ahorro de $${c.toLocaleString("es-CO")} aplicado`:"Selecciona 2 o mÃ¡s para descuento");const a=`Quiero mi Combo Personalizado: ${r.join(", ")}. Precio: $${l.toLocaleString("es-CO")}`,d=encodeURIComponent(a);n.href=`https://wa.me/573005965404?text=${d}`}console.log("Custom Combo elements found"),t.forEach(e=>{e.addEventListener("change",r)}),r()}else console.error("Custom Combo elements missing:",{checkboxes:t.length,priceDisplay:!!o,btnUltimate:!!n});if("#faq-reseller"===window.location.hash){const L=document.getElementById("faq-reseller");if(L){const S=L.querySelector(".faq-question");S&&setTimeout(()=>{toggleFaq(S),L.scrollIntoView({behavior:"smooth",block:"center"})},500)}}const s=document.getElementById("scroll-up"),c=document.getElementById("scroll-down"),l=()=>Array.from(document.querySelectorAll("header, section, footer")).filter(e=>e.offsetHeight>0),i=e=>{const t=window.scrollY+window.innerHeight/3;for(let o=e.length-1;o>=0;o--)if(e[o].offsetTop<=t)return o;return 0};if(s&&c){let q;s.addEventListener("click",()=>{const e=l(),t=i(e);e[Math.max(0,t-1)].scrollIntoView({behavior:"smooth"})}),c.addEventListener("click",()=>{const e=l(),t=i(e);e[Math.min(e.length-1,t+1)].scrollIntoView({behavior:"smooth"})});const E=document.querySelector(".scroll-buttons"),C=document.querySelector(".whatsapp-float");window.addEventListener("scroll",()=>{E&&E.classList.add("hidden"),C&&C.classList.add("hidden"),window.clearTimeout(q),q=setTimeout(()=>{E&&E.classList.remove("hidden"),C&&C.classList.remove("hidden")},1e3)})}}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".carousel-slide img").forEach(e=>{e.addEventListener("click",()=>openLightbox(e))}),initQuantitySelectors()});